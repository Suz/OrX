% modular simulations for 31P orientations% based on rr2spin and orientsim2 and etc.% trying to make this user-usable%% SR Kiihne, 10-02-04%%% file names:  single quote is needed before and after to define stringsnmrdatafile = '1r15' ; reportname  = '1r15fit' ; % text file for reportresultsfile = '1r15' ; % matlab file for simulation, residuals, etc.notes = 'testing' ; % additional text saved in the report: sample name, conditions?% parameters from spectrum (changeable)w_rot = 2000; %5500; 		% spin rate in Hzoffset = -0.1; 				% RF offset in ppm: chemical shift at CENTER of spectrumdw = 5.3e-6; %8e4;			% dw value from spectrumfreq = 303.6578150e6; %161.794297959338e6; 	% SFO1 in bruker speak% parameters from sample (changeable), units = ppmw_iso = 0; 	% isotropic shift (ppm). Measure this carefully!!!!delta = 34.5; 	% static = 111ppm for DOPCeta = 0;		% static = 0.5566 for DOPCmax_sideband = 10; % largest sideband order in simulated spectrum			% decrease this if you get an error 'index is negative or zero'% simulation parameters% to be minimized: give initial estimatesangle = 95; 			% degrees, nominal sample orientation wrt rotor axis (in degrees)mosaic_spread = 0.1; 		% degrees, width (+/-) of Gaussian distribution about angle.linewidth = 350;	% hz, line broadening -- get initial estimate by fitting 1 peakpercent_isotropic = 3; 	% percentage of unoriented material giving signal.% fitting parametersverbose = 0; % set to >0 to slow down fitting, see intermediate results, errors.fit_tolerance = 1e-4;  % continue fitting until less than (tolerance) change in parameters.chi_tolerance = 1e-4;  % continue fitting until less than (tolerance) change in chi squared.max_iterations = 5000; % maximum number of iterations.hold_orientation = 1; % if not =0, director angle allowed to vary from ideal.